syntax = "proto3";

package prototype;

option go_package = "github.com/coschain/contentos-go/prototype";

message account_name{
    string value = 1;
}

message chain_id{
    uint32 value = 1;
}

message safe64{
    int64 value = 1;
}

message coin{
    uint64 value = 1;
}

message vest{
    uint64 value = 1;
}

message public_key_type{
    bytes data = 1;
}

message private_key_type{
    bytes data = 1;
}

message kv_account_auth{
    account_name name = 1;
    uint32 weight = 2;
}

message kv_key_auth{
    public_key_type key = 1;
    uint32 weight = 2;
}

message authority{
    enum classification{
         owner   = 0;
         active  = 1;
         key     = 2;
         posting = 3;
    }
    classification cf = 1;
    uint32 weight_threshold = 2;
    repeated kv_account_auth account_auths = 3;
    repeated kv_key_auth key_auths = 4;
    //map<namex, uint32> account_auths = 2;
    // map<public_key_type, uint32> key_auths = 3;
}

message time_point_sec{
    uint32 utc_seconds = 1;
}

message signature_type{
    bytes sig = 1;
}

message sha256{
    bytes hash = 1;
}

message chain_properties{
    coin account_creation_fee = 1;
    uint32 maximum_block_size = 2;
}

message follower_relation{
    account_name account = 1;
    time_point_sec created_time = 2;
    account_name follower = 3;
}

message following_relation{
    account_name account = 1;
    time_point_sec created_time = 2;
    account_name following = 3;
}

message follower_created_order{
    account_name account = 1;
    time_point_sec created_time = 2;
    account_name follower = 3;
}

message following_created_order{
    account_name account = 1;
    time_point_sec created_time = 2;
    account_name following = 3;
}

message witness_schedule_type{
    enum witness_schedule_type{
        top19 = 0;
        timeshare = 1;
        miner = 2;
        none = 3;
    }
    witness_schedule_type value = 1;
}

message post_created_order{
    prototype.time_point_sec last_update = 1;
    uint64 root_id = 2;
    uint64 post_id = 3;
}

message voter_id{
    account_name    voter   = 1;
    uint64          post_id = 2;
}

message bp_voter_id{
    account_name    voter   = 1;
    account_name    witness = 2;
}

message bp_witness_id{
    account_name    voter   = 1;
    account_name    witness = 2;
}

message post_reply_order{
    uint64 root_id = 1;
    prototype.time_point_sec last_update = 2;
    uint64 post_id = 3;
}

message dynamic_properties {
    int32                        id                            =      1;
    prototype.sha256             head_block_id                 =      2;
    uint32                       head_block_number             =      3;
    uint32                       maximum_block_size            =      4;
    prototype.coin               total_cos                     =      5;
    prototype.time_point_sec     time                          =      6;
    prototype.account_name       current_witness               =      7;
    uint32                       irreversible_block_num        =      8;
    uint32                       tps                           =      9;
    prototype.vest               total_vesting_shares          =      10;
    prototype.coin               current_supply                =      11;
    uint32                       current_aslot                 =      12;
    uint64   weighted_vps = 13;
}


message beneficiary_route_type{
    account_name    name    = 1;
    uint32          weight  = 2;
}
